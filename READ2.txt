================================================================================
PROJECT: OptiLink // Command Center
PLATFORM: .NET 10.0 (Web API) on Arch Linux
FRONTEND: HTML5 / Chart.js / SignalR (WebSockets)
DATABASE: SQLite (Local persistence)
STATUS:   v1.0 (Stable Backend + Dashboard)
================================================================================

[1] SYSTEM ARCHITECTURE OVERVIEW
--------------------------------------------------------------------------------
The system is a self-hosted monitoring dashboard ("Mission Control") running on
an Arch Linux server. It visualizes real-time metrics (CPU, RAM, Network) and
persists historical data for trend analysis.

It consists of three main layers:
1. THE WATCHER (Background Service): Reads Linux /proc files every 2s.
2. THE BRAIN (Web API): Stores data in SQLite and serves history to the UI.
3. THE FACE (Frontend): A "Sci-Fi" style dashboard connecting via WebSockets.

[2] COMPLETE DIRECTORY STRUCTURE
--------------------------------------------------------------------------------
~/Projects/OptiLink/OptiLink/
│
├── Controllers/
│   └── StatsController.cs
│       [ROLE] API Endpoint Manager
│       [FUNC] Handles HTTP GET requests for historical data.
│       [NOTE] Returns data in Epoch Milliseconds (long) to ensure perfect
│              synchronization with the frontend, removing timezone issues.
│
├── Data/
│   ├── AppDbContext.cs
│   │   [ROLE] Database Session
│   │   [FUNC] Configures Entity Framework to talk to the SQLite file.
│   │
│   └── CpuMetric.cs
│       [ROLE] Data Model
│       [FUNC] Defines the database table structure (Id, Timestamp, Load).
│
├── Hubs/
│   └── DashboardHub.cs
│       [ROLE] Real-Time Gateway
│       [FUNC] A SignalR Hub that pushes live updates to connected clients.
│       [NOTE] Acts as the "Radio Tower" for the web dashboard.
│
├── Services/
│   ├── HardwareMonitor.cs
│   │   [ROLE] The Heartbeat (Background Worker)
│   │   [FUNC] Runs an infinite loop every 2 seconds.
│   │   [LOGIC] 
│   │       - Reads /proc/stat for CPU Load.
│   │       - Reads /proc/meminfo for RAM/Swap usage.
│   │       - Reads /proc/net/dev for Network Traffic (Smart Interface Selection).
│   │       - Pushes live data to DashboardHub.
│   │       - Saves historical data to AppDbContext.
│   │
│   └── ContainerWatchdog.cs (Planned/Stubs)
│       [ROLE] Docker Automator
│       [FUNC] Monitors the Docker Socket for unhealthy containers.
│
├── wwwroot/
│   └── index.html
│       [ROLE] The Dashboard (Single Page App)
│       [TECH] HTML5, CSS3 (Grid Layout), Chart.js (Visualization).
│       [FUNC] 
│           - Connects to SignalR Hub for live 1-second updates.
│           - Fetches history API for 12h/24h/48h trends.
│           - Renders "Mission Control" UI with pulse animations.
│
├── Properties/
│   └── launchSettings.json
│       [ROLE] Dev Config
│       [FUNC] Controls local ports (http://localhost:5000) and env variables.
│
├── bin/ & obj/
│   [ROLE] Build Artifacts
│   [NOTE] Automatically generated by the .NET Compiler. Contains the raw binary.
│
├── appsettings.json
│   [ROLE] Global Configuration
│   [FUNC] Stores connection strings and logging levels.
│
├── optilink.db
│   [ROLE] The Database
│   [NOTE] A binary SQLite file created at runtime. Stores all historical metrics.
│
├── OptiLink.csproj
│   [ROLE] Project Definition
│   [FUNC] XML file listing all NuGet packages (SQLite, SignalR, Docker SDK).
│
└── Program.cs
    [ROLE] The Entry Point
    [FUNC] 
        - Configures Dependency Injection (DI).
        - Wires up the SQLite Database.
        - Registers the HardwareMonitor background service.
        - Starts the Web Server (Kestrel).

[3] DATA FLOW SUMMARY
--------------------------------------------------------------------------------
1.  HardwareMonitor wakes up (Interval: 2s).
2.  It scrapes Linux system files (/proc).
3.  It calculates deltas (Current Traffic - Last Traffic).
4.  It broadcasts a "SystemStats" object to all WebSocket clients (Live Graph).
5.  It saves a "CpuMetric" record to optilink.db (History Graph).

[4] KEY EXTERNAL DEPENDENCIES
--------------------------------------------------------------------------------
- Microsoft.EntityFrameworkCore.Sqlite: For database interactions.
- Microsoft.AspNetCore.SignalR: For real-time web communication.
- Chart.js (CDN): For rendering the visual graphs.
- Chartjs-adapter-date-fns (CDN): For handling time-series axes.

